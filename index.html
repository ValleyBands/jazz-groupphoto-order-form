<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jazz Band Group Photo Order Form</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body {
    font-family: 'Inter', sans-serif;
    background-color: #f0f4f8;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    min-height: 100vh;
    padding: 20px;
    box-sizing: border-box;
}
.container {
    background-color: #ffffff;
    padding: 32px;
    border-radius: 16px;
    box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    width: 100%;
    max-width: 600px;
    text-align: left;
    margin-top: 20px;
    margin-bottom: 20px;
}
label { display:block; margin-bottom:8px; font-weight:500; color:#374151; }
input[type="text"], input[type="email"], input[type="tel"], input[type="number"], select {
    width:100%; padding:12px; border:1px solid #d1d5db; border-radius:8px; margin-bottom:16px;
    font-size:1rem; color:#1f2937; transition:border-color 0.2s; box-sizing:border-box;
}
input:focus, select:focus { border-color:#4f46e5; outline:none; }
input[type="number"] { -moz-appearance:textfield; }
input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance:none; margin:0; }
.student-entry { border:1px dashed #a5b4fc; padding:16px; border-radius:8px; margin-bottom:16px; background-color:#f5f6ff; }
.remove-student-btn { background-color:#ef4444; color:white; padding:8px 12px; border-radius:8px; cursor:pointer; font-size:0.9rem; margin-top:8px; transition:background-color 0.2s ease; }
.remove-student-btn:hover { background-color:#dc2626; }
.add-student-btn { background-color:#4f46e5; color:white; padding:10px 16px; border-radius:8px; cursor:pointer; font-size:1rem; margin-top:16px; margin-bottom:24px; transition:background-color 0.2s ease; }
.add-student-btn:hover { background-color:#4338ca; }
button[type="submit"] { background-color:#22c55e; color:white; padding:14px 24px; border-radius:8px; cursor:pointer; font-size:1.1rem; font-weight:600; width:100%; transition:background-color 0.2s ease, transform 0.1s ease; }
button[type="submit"]:hover { background-color:#16a34a; transform:translateY(-1px); }
.message-box { background-color:#d1fae5; color:#065f46; padding:16px; border-radius:8px; margin-top:20px; font-weight:500; text-align:center; display:none; }
.message-box.error { background-color:#fee2e2; color:#991b1b; }
.payment-link-section { margin-top:16px; text-align:center; }
.payment-link-section a { color:#4f46e5; text-decoration:underline; }
.payment-link-section a:hover { color:#4338ca; }
</style>
</head>
<body>
<div class="container">
<h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">Jazz Band Group Photo Order Form</h1>
<p class="text-gray-600 mb-8 text-center">Each Group Photo costs <span class="font-semibold text-indigo-600">$15.45</span>.</p>

<div class="mb-8 text-center">
  <h2 class="text-xl font-semibold text-gray-800 mb-4">Group Photo Example:</h2>
  <img src="https://raw.githubusercontent.com/ValleyBands/jazz-groupphoto-order-form/main/Basie%20Band_2.png" alt="Example band group photo" class="mx-auto shadow-lg border-4 border-indigo-300" style="width:5in; height:auto; border-radius:0; object-fit:contain;" onerror="this.onerror=null;this.src='https://placehold.co/192x120/cccccc/000000?text=Band+Group+Photo';">
  <p class="text-sm text-gray-500 mt-2">Example Band Group Photo</p>
</div>

<form id="bandOrderForm" class="space-y-4">
    <div>
        <label for="parentName">Parent/Guardian Name:</label>
        <input type="text" id="parentName" name="parentName" required>
    </div>
    <div>
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required>
    </div>
    <div>
        <label for="phone">Phone Number:</label>
        <input type="tel" id="phone" name="phone" oninput="formatPhoneNumber(this)" maxlength="12" placeholder="e.g., 123-456-7890" required>
    </div>

    <h2 class="text-2xl font-semibold text-gray-800 mt-8 mb-4 border-b pb-2">Student Information</h2>
    <div id="studentsContainer">
        <div class="student-entry" data-student-id="1">
            <h3 class="text-lg font-medium text-gray-700 mb-2">Student 1</h3>
            <label for="studentName_1">Student Name:</label>
            <input type="text" id="studentName_1" name="studentName_1" required>

            <label for="jazzBand_1">Jazz Band:</label>
            <select id="jazzBand_1" name="jazzBand_1" required>
                <option value="" disabled selected>Select Band</option>
                <option value="Basie band">Basie band</option>
                <option value="Ellington band">Ellington band</option>
                <option value="Jazz Orchestra">Jazz Orchestra</option>
                <option value="Jazz Ensemble">Jazz Ensemble</option>
                <option value="Studio Jazz">Studio Jazz</option>
            </select>

            <label for="numPhotos_1">Number of Group Photos for Student 1:</label>
            <input type="number" id="numPhotos_1" name="numPhotos_1" min="0" value="0" oninput="calculateTotal()" required>
        </div>
    </div>

    <button type="button" id="addStudentBtn" class="add-student-btn">Add Another Student</button>

    <div class="bg-indigo-100 p-6 rounded-lg border-2 border-indigo-300 mt-8">
        <p class="text-xl text-indigo-800 font-semibold mb-2 text-center">Total Cost for All Group Photos:</p>
        <p id="totalCost" class="text-5xl font-extrabold text-indigo-700 text-center">$0.00</p>
        <input type="hidden" id="hiddenTotalCost" name="totalCost" value="0.00">
    </div>

    <button type="submit" class="mt-8">Submit Order and Pay Here</button>
</form>

<div class="payment-link-section">
    <p class="text-gray-600">If re-direct to payment site doesn't work please use this link: <a href="https://checkout.square.site/merchant/44QXX4R2B839B/checkout/MZPG4FERMHY4P5LDQ5HCVFZ2" target="_blank">Payment Link</a></p>
</div>
<div id="messageBox" class="message-box"></div>
</div>

<script>
const PRICE_PER_PHOTO = 15.45;
let studentCounter = 1;

function formatPhoneNumber(input) {
    let numbers = input.value.replace(/\D/g,'');
    let formattedNumber='';
    if(numbers.length>0) formattedNumber+=numbers.substring(0,3);
    if(numbers.length>=4) formattedNumber+='-'+numbers.substring(3,6);
    if(numbers.length>=7) formattedNumber+='-'+numbers.substring(6,10);
    input.value=formattedNumber;
}

function calculateTotal(){
    let overallTotal=0;
    document.querySelectorAll('input[name^="numPhotos_"]').forEach(input=>{
        let n=parseInt(input.value);
        if(isNaN(n)||n<0){ n=0; input.value=0; }
        overallTotal+=n*PRICE_PER_PHOTO;
    });
    document.getElementById('totalCost').textContent=`$${overallTotal.toFixed(2)}`;
    document.getElementById('hiddenTotalCost').value=overallTotal.toFixed(2);
}

document.getElementById('addStudentBtn').addEventListener('click',()=>{
    studentCounter++;
    const container=document.getElementById('studentsContainer');
    const div=document.createElement('div');
    div.classList.add('student-entry');
    div.setAttribute('data-student-id',studentCounter);
    div.innerHTML=`
        <h3 class="text-lg font-medium text-gray-700 mb-2">Student ${studentCounter}</h3>
        <label for="studentName_${studentCounter}">Student Name:</label>
        <input type="text" id="studentName_${studentCounter}" name="studentName_${studentCounter}" required>

        <label for="jazzBand_${studentCounter}">Jazz Band:</label>
        <select id="jazzBand_${studentCounter}" name="jazzBand_${studentCounter}" required>
            <option value="" disabled selected>Select Band</option>
            <option value="Basie band">Basie band</option>
            <option value="Ellington band">Ellington band</option>
            <option value="Jazz Orchestra">Jazz Orchestra</option>
            <option value="Jazz Ensemble">Jazz Ensemble</option>
            <option value="Studio Jazz">Studio Jazz</option>
        </select>

        <label for="numPhotos_${studentCounter}">Number of Group Photos for Student ${studentCounter}:</label>
        <input type="number" id="numPhotos_${studentCounter}" name="numPhotos_${studentCounter}" min="0" value="0" oninput="calculateTotal()" required>

        <button type="button" class="remove-student-btn" onclick="removeStudent(this)">Remove Student
